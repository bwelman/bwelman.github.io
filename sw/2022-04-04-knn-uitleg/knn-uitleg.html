<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl" xml:lang="nl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ben Welman">
<meta name="dcterms.date" content="2022-04-04">

<title>Ben Welman - KNN uitleg</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Geen resultaten",
    "search-matching-documents-text": "Gevonden documenten",
    "search-copy-link-title": "Kopieer link om te zoeken",
    "search-hide-matches-text": "Extra overeenkomsten verbergen",
    "search-more-match-text": "meer overeenkomst in dit document",
    "search-more-matches-text": "meer overeenkomsten in dit document",
    "search-clear-button-title": "Wissen",
    "search-detached-cancel-button-title": "Annuleren",
    "search-submit-button-title": "Verzenden"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo-transparant.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Home</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../studieboeken.html">
 <span class="menu-text">Studieboeken</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../softwijs.html">
 <span class="menu-text">Softwijs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../vlearmoesbier.html">
 <span class="menu-text">Vlearmoesbier</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">KNN uitleg</h1>
  <div class="quarto-categories">
    <div class="quarto-category">excel</div>
    <div class="quarto-category">machinelearning</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur</div>
    <div class="quarto-title-meta-contents">
             <p>Ben Welman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Publicatiedatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">4 april 2022</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Samenvatting</div>
    <p>Uitleg van de Machine Learning methode KNN aan de hand van een paar kleine voorbeelden in Excel.</p>
  </div>
</div>

</header>

<p>Machine Learning is een concept waarbij via een algoritme geprobeerd wordt om patronen in gegevens te ontdekken. Een van de eenvoudigste algoritmes is KNN, wat staat voor <em>k-Nearest-Neighbor</em>, oftewel de <span class="math inline">\(k\)</span> dichstbijzijnde buren. Wanneer je het voor classificatie gebruikt, dan wordt een nieuw gegevenspunt in een doelgroep (klasse) ondergebracht op basis van de kenmerken van de <span class="math inline">\(k\)</span> dichtstbijgelegen gegevenspunten.</p>
<p>Nu is Excel niet echt geschikt om Machine Learning technieken toe te passen. Wel kun je het principe van sommige technieken, zoals KNN, goed met behulp van Excel uitleggen.</p>
<p><strong>Voorbeeld met 1 kenmerk</strong></p>
<p>Stel je hebt een groep van 8 personen, 4 mannen en 4 vrouwen, waarvan de lengte (cm) bekend is. Bij deze groep komt nu een nieuwe persoon waarvan je alleen de lengte weet, 176 cm. Kun je dan hiermee voorspellen of het een man of een vrouw is?</p>
<div id="fig-knn-1dim-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="knn-1dim-data.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figuur&nbsp;1: Lengte van 8 personen.</figcaption><p></p>
</figure>
</div>
<p>Voor een vergelijking zijn in figuur <a href="#fig-knn-1dim-grafiek">Figuur&nbsp;2</a> de lengtes van alle personen op een denkbeeldige meetlat afgebeeld.</p>
<div id="fig-knn-1dim-grafiek" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="knn-1dim-grafiek.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figuur&nbsp;2: Afbeelding van de lengte van de personen op een denkbeeldige meetlat.</figcaption><p></p>
</figure>
</div>
<p>Het KNN algoritme berekent nu de afstanden van de nieuwe persoon tot alle gecategoriseerde personen, waarvan het geslacht dus bekend is. Onder afstand wordt hier dan het verschil in lengte verstaan. Deze afstanden zijn te zien in <a href="#fig-knn-1dim-data">Figuur&nbsp;1</a>.</p>
<p>Vervolgens worden deze afstanden gerangschikt van de dichtstbijzijnde (meest vergelijkbare) tot de verste (de minst vergelijkbare).</p>
<p>De waarde voor <span class="math inline">\(k\)</span> in het algoritme staat voor het aantal buren waarmee je gaat vergelijken. Elk van deze <span class="math inline">\(k\)</span> buren brengt als het ware een stem uit voor de desbetreffende categorie. De conclusie of de nieuwe persoon een man of een vrouw is wordt dan getrokken op basis van de meeste stemmen.</p>
<ul>
<li><span class="math inline">\(k=1\)</span>: De dichtstbijzijnde persoon is M2. Conclusie: nieuwe persoon = <strong>man</strong></li>
<li><span class="math inline">\(k=2\)</span>: De dichtstbijzijnde personen zijn M2 en M1. Conclusie: nieuwe persoon = <strong>man</strong></li>
<li><span class="math inline">\(k=3\)</span>: De dichtstbijzijnde personen zijn M2, M1 en V4. Conclusie: nieuwe persoon = <strong>man</strong></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Om de situatie te voorkomen waarbij de stemmen staken kun je voor <span class="math inline">\(k\)</span> het beste een oneven getal nemen.</p>
</div>
</div>
<p><strong>Voorbeeld met 2 kenmerken</strong></p>
<p>Nu is van de 4 mannen en 4 vrouwen naast de lengte (cm) ook het gewicht (kg) bekend. En het gewicht van de nieuwe persoon is 68 kg.</p>
<div id="fig-knn-2dim-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="knn-2dim-data.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figuur&nbsp;3: Lengte en gewicht van de personen.</figcaption><p></p>
</figure>
</div>
<p>In <a href="#fig-knn-2dim-grafiek">Figuur&nbsp;4</a> is een spreidingsdiagram van gewicht tegen lengte te zien.</p>
<div id="fig-knn-2dim-grafiek" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="knn-2dim-grafiek.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figuur&nbsp;4: Spreidingsdiagram van gewicht tegen lengte van de personen.</figcaption><p></p>
</figure>
</div>
<p>Ook nu wordt weer de afstand bepaald van de nieuwe persoon tot de andere personen. Bij twee variabelen wordt de Euclidische afstand bepaald. Voor twee punten <span class="math inline">\((x_1,y_1)\)</span> en <span class="math inline">\((x_2,y_2)\)</span> kun je deze via Pythagoras uitrekenen:</p>
<p><span class="math display">\[\text{afstand } = \sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2}\]</span></p>
<p>In <a href="#fig-knn-2dim-data">Figuur&nbsp;3</a> is de berekende afstand te zien. Daarna wordt weer gekeken welke de dichtstbijzijnde buren zijn.</p>
<ul>
<li><span class="math inline">\(k=1\)</span>: De dichtstbijzijnde persoon is M1. Conclusie: nieuwe persoon = <strong>man</strong></li>
<li><span class="math inline">\(k=2\)</span>: De dichtstbijzijnde personen zijn M1 en V4. Conclusie: geen uitsluitsel, stemmen staken</li>
<li><span class="math inline">\(k=3\)</span>: De dichtstbijzijnde personen zijn M1, V4 en V3. Conclusie: nieuwe persoon = <strong>vrouw</strong></li>
</ul>
<p><strong>Voorbeeld met 2 gestandaardiseerde kenmerken</strong></p>
<p>Verschillende variabelen hebben verschillende schaaleenheden, zoals hier de lengte in cm en het gewicht in kg. Dat kan er voor zorgen dat variabelen die op een grotere schaal gemeten worden een groter aandeel hebben in de berekende afstand en daardoor belangrijker worden gemaakt dan variabelen die op een kleinere schaal gemeten worden. Om dit te voorkomen kun je de gegevens transformeren naar een nieuwe schaal. Een veel gebruikte techniek hiervoor is de <em>min-max normalisatie</em> waarbij de gegevens geschaald worden naar het bereik <code>[0,1]</code>. Hiervoor wordt de kleinste en de grootste waarde van de gegevens bepaald. Vervolgens worden de gegevens gewijzigd via</p>
<p><span class="math inline">\(\text{genormaliseerde waarde } = \frac{x - min(x)}{max(x) - min(x)}\)</span></p>
<p>In <a href="#fig-knn-2dim-norm-data">Figuur&nbsp;5</a> zijn de variabelen lengte en gewicht genormaliseerd en is de afstand voor de genormaliseerde gegevens berekend. En in <a href="#fig-knn-2dim-norm-grafiek">Figuur&nbsp;6</a> zie je de bijpassende grafiek.</p>
<div id="fig-knn-2dim-norm-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="knn-2dim-norm-data.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figuur&nbsp;5: Lengte en gewicht van de personen.</figcaption><p></p>
</figure>
</div>
<div id="fig-knn-2dim-norm-grafiek" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="knn-2dim-norm-grafiek.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figuur&nbsp;6: Spreidingsdiagram van gewicht tegen lengte van de personen.</figcaption><p></p>
</figure>
</div>
<p>Wanneer nu naar de dichtstbijzijnde buren gekeken wordt zijn de resultaten iets anders.</p>
<ul>
<li><span class="math inline">\(k=1\)</span>: De dichtstbijzijnde persoon is M1. Conclusie: nieuwe persoon = <strong>man</strong></li>
<li><span class="math inline">\(k=2\)</span>: De dichtstbijzijnde personen zijn M1 en V4. Conclusie: geen uitsluitsel, stemmen staken</li>
<li><span class="math inline">\(k=3\)</span>: De dichtstbijzijnde personen zijn M1, V4 en M2. Conclusie: nieuwe persoon = <strong>man</strong></li>
</ul>
<p><strong>Meer dan 2 kenmerken</strong></p>
<p>Voor meer attributen, bijvoorbeeld door de gegevens aan te vullen met de taillemaat, is het principe hetzelfde. Je kunt het wat moeilijker tekenen en ook het berekenen van de afstand is wat meer werk.</p>
<p><span class="math display">\[\text{afstand} = \sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2 + (z_1 - z_2)^2 + ... }\]</span></p>
<p><strong>kNN in de praktijk</strong></p>
<p>In de praktijk heb je met grotere datasets te maken. Om de beste waarde voor <span class="math inline">\(k\)</span> te vinden wordt de dataset gesplitst in een groter deel van zo’n 70%-80% van de gegevens om het model te trainen en een resterend kleiner deel om het model te testen. Het trainen en testen gebeurt voor verschillende waarden van <span class="math inline">\(k\)</span>. Die waarde van <span class="math inline">\(k\)</span> welke de kleinste voorspelfout geeft wordt dan als beste waarde voor het model gebruikt.</p>
<p>Dit alles is met Excel niet te doen. Daartoe lenen R en Python zich veel beter. Voor beide zijn veel artikelen en tutorials met voorbeelden te vinden.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Gekopieerd!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Gekopieerd!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/https:\/\/bwelman\.github\.io\//);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 copyright 2022, Ben Welman
  </li>  
</ul>
    </div>   
  </div>
</footer>



</body></html>