<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl" xml:lang="nl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Archief Ben - K-Means uitleg</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Geen resultaten",
    "search-matching-documents-text": "Gevonden documenten",
    "search-copy-link-title": "Kopieer link om te zoeken",
    "search-hide-matches-text": "Extra overeenkomsten verbergen",
    "search-more-match-text": "meer overeenkomst in dit document",
    "search-more-matches-text": "meer overeenkomsten in dit document",
    "search-clear-button-title": "Wissen",
    "search-detached-cancel-button-title": "Annuleren",
    "search-submit-button-title": "Verzenden",
    "search-label": "Zoeken"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-DZG4072LJ3"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-DZG4072LJ3', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo-transparant.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Archief Ben</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Zoeken"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Schakel tussen navigatie" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../access.html" rel="" target="">
 <span class="menu-text">Access</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../excel.html" rel="" target="">
 <span class="menu-text">Excel</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../bier.html" rel="" target="">
 <span class="menu-text">Bier</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../chemie.html" rel="" target="">
 <span class="menu-text">Chemie</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../divers.html" rel="" target="">
 <span class="menu-text">Divers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html" rel="" target="">
 <span class="menu-text">Tutorials</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Op deze pagina</h2>
   
  <ul>
  <li><a href="#principe" id="toc-principe" class="nav-link active" data-scroll-target="#principe">Principe</a></li>
  <li><a href="#excel-model" id="toc-excel-model" class="nav-link" data-scroll-target="#excel-model">Excel model</a>
  <ul class="collapse">
  <li><a href="#model-met-3-clusters-k3" id="toc-model-met-3-clusters-k3" class="nav-link" data-scroll-target="#model-met-3-clusters-k3">Model met 3 clusters (k=3)</a></li>
  <li><a href="#model-met-2-clusters-k2" id="toc-model-met-2-clusters-k2" class="nav-link" data-scroll-target="#model-met-2-clusters-k2">Model met 2 clusters (k=2)</a></li>
  <li><a href="#de-beste-waarde-voor-k" id="toc-de-beste-waarde-voor-k" class="nav-link" data-scroll-target="#de-beste-waarde-voor-k">De beste waarde voor k</a></li>
  </ul></li>
  <li><a href="#slotopmerkingen" id="toc-slotopmerkingen" class="nav-link" data-scroll-target="#slotopmerkingen">Slotopmerkingen</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">K-Means uitleg</h1>
  <div class="quarto-categories">
    <div class="quarto-category">machinelearning</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Publicatiedatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">24 oktober 2022</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Samenvatting</div>
    <p>Uitleg van het K-Means algoritme voor Machine Learning aan de hand van een klein voorbeeld in Excel.</p>
  </div>
</div>

</header>

<p>K-Means (vertaald: k-gemiddeld) is een veel gebruikt algoritme voor ongecontroleerd (niet-bewaakt) machinaal leren. Om te leren hoe dit algoritme werkt zal een eenvoudig voorbeeld in Excel worden uitgewerkt.</p>
<section id="principe" class="level1">
<h1>Principe</h1>
<p>Het doel van clustering is om waarnemingen in een dataset te groeperen in clusters die vergelijkbare kenmerken hebben. De techniek wordt bijvoorbeeld veel gebruikt bij klantsegmentatie. De <span class="math inline">\(k\)</span> is het aantal clusters.</p>
<p>Bij k-means wordt elke cluster gekenmerkt door een centrum (zwaartepunt) en wordt een waarneming ondergebracht in de dichtsbijzijnde cluster, dus de cluster met de kortste afstand naar het centrum ervan.</p>
<p>Er bestaan verschillende manieren om de afstand te bepalen. De meest gebruikte is de <strong>Euclidische afstand</strong> (ook wel Pythagoras afstand genoemd) welke ook in het voorbeeld gebruikt gaat worden.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Opmerking
</div>
</div>
<div class="callout-body-container callout-body">
<p>Heb je twee punten met de co√∂rdinaten <span class="math inline">\((x_1, y_1)\)</span> en <span class="math inline">\((x_2, y_2)\)</span> dan is de Euclidische afstand uit te rekenen via de bekende Stelling van Pythagoras.</p>
<p><span class="math display">\[\text{afstand = } \sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2}\]</span></p>
</div>
</div>
<p>Het algoritme (van Lloyd) werkt als volgt.</p>
<ol type="1">
<li><p>Begonnen wordt met het willekeurig kiezen van het centrum voor elke cluster.</p></li>
<li><p>Daarna wordt voor elke waarneming de afstand tot het centrum van elke cluster bepaald.</p></li>
<li><p>Elke waarneming wordt nu ingedeeld bij het cluster met de kortste afstand tot het centrum.</p></li>
<li><p>Voor elke cluster wordt een nieuw centrum bepaald op basis van de gemiddelde waarden van alle waarnemingen binnen dat cluster.</p></li>
<li><p>De stappen 2 t/m 5 worden herhaald tot een bepaalde nauwkeurigheid bereikt is.</p></li>
</ol>
<p>Dit principe wordt in Excel gedemonstreerd met een kleine, eenvoudige dataset.</p>
</section>
<section id="excel-model" class="level1">
<h1>Excel model</h1>
<p>Het te downloaden bestand <a href="kmeans.xlsx">kmeans.xlsx</a> bevat een werkblad <em>data</em> met 10 waarnemingen van twee variabelen x1 en x2, zie <a href="#fig-kmeans-data">Figuur&nbsp;1</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Opmerking
</div>
</div>
<div class="callout-body-container callout-body">
<p>In de praktijk stellen de variabelen natuurlijk iets voor. Zo zou je van 10 personen de gemiddelde uitgaven voor voedsel (x1) en voor kleding (x2) kunnen bijhouden. Voor de interpretatie van de clustering is deze betekenis van belang.</p>
</div>
</div>
<div id="fig-kmeans-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-data.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;1: Dataset met 10 waarnemingen van twee variabelen</figcaption>
</figure>
</div>
<p>Wanneer je de waarnemingen uitzet in een spreidingsdiagram, zie <a href="#fig-kmeans-data-diagram">Figuur&nbsp;2</a>, dan kun je visueel de waarnemingen al in 2 clusters indelen, een groep linksboven en een groep rechtsonder.</p>
<div id="fig-kmeans-data-diagram" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-data-diagram.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;2: Spreidingsdiagram van de variabelen x1 en x2.</figcaption>
</figure>
</div>
<p>Eventueel zou je linksboven zelfs twee groepen kunnen voorstellen, waardoor het totaal aantal clusters 3 wordt.</p>
<p>Voor de implementatie van k-means zal eerst met een model met 3 clusters opgezet worden en daarna een model met 2 clusters. Vervolgens zal een methode besproken worden om de beste keuze te maken.</p>
<section id="model-met-3-clusters-k3" class="level2">
<h2 class="anchored" data-anchor-id="model-met-3-clusters-k3">Model met 3 clusters (k=3)</h2>
<p>Om de oorspronkelijke dataset intact te houden wordt een kopie van het werkblad <em>data</em> gemaakt en hernoemd als <em>model-k3</em>.</p>
<p>In <a href="#fig-kmeans-model-k3-start">Figuur&nbsp;3</a> zie je het gemaakte k-means model.</p>
<div id="fig-kmeans-model-k3-start" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-model-k3-start.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;3: K-means model voor 3 clusters.</figcaption>
</figure>
</div>
<p>In de cellen B16:B18 zie je de willekeurig gekozen waarden voor het centrum van de drie clusters.</p>
<p>Om inzichtelijk te maken waar elk centrum ligt ten opzichte van de waarnemingen zijn deze ook aan het spreidingsdiagram toegevoegd, zie <a href="#fig-kmeans-model-k3-diagram-start">Figuur&nbsp;4</a>. Wanneer je naar het spreidingsdiagram kijkt, dan zijn er betere beginwaarden te kiezen.</p>
<div id="fig-kmeans-model-k3-diagram-start" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-model-k3-diagram-start.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;4: Spreidingsdiagram van de waarnemingen met daaraan toegevoegd het centrum van de drie clusters.</figcaption>
</figure>
</div>
<p>De kolom met de naam <strong>D1</strong> bevat de afstand van elke waarneming tot het centrum van cluster 1, kolom <strong>D2</strong> de afstand tot het centrum van cluster 2 en kolom <strong>D3</strong> de afstand tot het centrum van cluster 3.</p>
<p>De formule in cel D2 is `=WORTEL(($B2-$B$16)^2+($C2-$C$16)^2)`. Deze kun je daarna naar rechts en naar beneden kopieren zodat het bereik D2:F11 met de berekende afstanden gevuld wordt.</p>
<p>De kolom met de naam <strong>Min</strong> bevat de kortste afstand. De formule in cel G2 is `=MIN(D2:F2)` welke je weer naar beneden tot G11 kunt kopieren. In cel G12 wordt het totaal van deze kortste afstanden berekend.</p>
<p>In de kolom met de naam <strong>cluster</strong> wordt vervolgens vastgesteld in welke cluster de waarneming moet vallen. In cel G2 staat hiervoor de formule `=VERGELIJKEN(G2;D2:F2;0)` welke je weer naar beneden kunt kopieren.</p>
<p>Nu voor elke cluster bekend is welke waarnemingen tot de cluster behoren, kan voor elke cluster het nieuwe centrum berekend worden. Hiervoor worden de gemiddeldes van x1 en x2 berekend voor de waarnemingen binnen elke cluster. Dat is gebeurd in de cellen B21:C23. Zo is de formule in cel B21 <code>=GEMIDDELDE.ALS($H$2:$H$11;$A21;B$2:B$11)</code>. Ook deze kun je weer kopieren.</p>
<p>Nu kan het iteratieproces beginnen. Kopieer de nieuwe centrumwaarden naar B16:B18.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Belangrijk
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let er op dat je de waarden kopieert (via Plakken Speciaal) en niet de formules.</p>
</div>
</div>
<p>Er worden nu weer nieuwe centrumwaarden berekend en ook neemt de som van de minimum afstanden af. In de grafiek kun je ook zien dat de drie centra verschuiven in de richting van de cluster. Herhaal dit proces totdat er nauwelijks meer wijzigingen optreden. Dat is bij dit voorbeeld na de 4e iteratiestap. In <a href="#fig-kmeans-model-k3-eind">Figuur&nbsp;5</a> zie je de gevonden waarden voor de drie centra en de clusterindeling voor de waarnemingen.</p>
<div id="fig-kmeans-model-k3-eind" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-model-k3-eind.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;5: Eindresultaat met de waarden voor de centra en de clusterindelingen.</figcaption>
</figure>
</div>
<p>En in <a href="#fig-kmeans-model-k3-diagram-eind">Figuur&nbsp;6</a> kun je de lokaties van de clusters waarnemen die waarschijnlijk wel overeenkomen met de eerste gedachte.</p>
<div id="fig-kmeans-model-k3-diagram-eind" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-model-k3-diagram-eind.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;6: Spreidingsdiagram van het eindresultaat.</figcaption>
</figure>
</div>
</section>
<section id="model-met-2-clusters-k2" class="level2">
<h2 class="anchored" data-anchor-id="model-met-2-clusters-k2">Model met 2 clusters (k=2)</h2>
<p>Het handigste om een model met 2 clusters te maken is door te beginnen met het maken van een kopie van werkblad <em>model-k3</em> en deze te hernoemen naar <em>model-k2</em>. Vervolgens verwijder je de kolom D3 en de rijen voor cluster 3.</p>
<p>Je kunt ook nu weer starten met willekeurig gekozen beginwaarden voor de clustercentra, maar om te laten zien dat de iteratie wat sneller verloopt wanneer de beginwaarden gunstiger zijn worden de volgende beginwaarden gebruikt:</p>
<p>Centrum cluster 1 = (5,15) en Centrum cluster 2 = (15, 5)</p>
<p>Al na de tweede iteratiestap treden geen wijzigingen meer op. De eindresultaten zijn te zien in <a href="#fig-kmeans-model-k2-eind">Figuur&nbsp;7</a> en <a href="#fig-kmeans-model-k2-diagram-eind">Figuur&nbsp;8</a>.</p>
<div id="fig-kmeans-model-k2-eind" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-model-k2-eind.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;7: Eindresultaat met de waarden voor het model met 2 clusters.</figcaption>
</figure>
</div>
<div id="fig-kmeans-model-k2-diagram-eind" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-model-k2-diagram-eind.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;8: Spreidingsdiagram van het eindresultaat voor het model met 2 clusters.</figcaption>
</figure>
</div>
</section>
<section id="de-beste-waarde-voor-k" class="level2">
<h2 class="anchored" data-anchor-id="de-beste-waarde-voor-k">De beste waarde voor k</h2>
<p>Een veelgebruikte methode om de beste waarde voor k te bepalen is de zogenaamde elleboogmethode. Hierbij wordt gekeken hoe de som van de minimale afstanden verandert voor verschillende waarden van <span class="math inline">\(k\)</span>.</p>
<p>Voor k=2 en k=3 is deze reeds in het werkblad berekend. Voor het geval k=1 is het triviaal. het centrum is in dat geval het gemiddelde van de waarden voor x1 en x2. je moet dan alleen nog de som van de afstanden tot dit centrum berekenen.</p>
<p>Daarna kun je de som van de minimumafstanden uitzetten tegen de waarden van k.</p>
<div id="fig-kmeans-elleboog" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kmeans-elleboog.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figuur&nbsp;9: Som van de minimale afstanden voor de verschillende waarden van k.</figcaption>
</figure>
</div>
<p>In <a href="#fig-kmeans-elleboog">Figuur&nbsp;9</a> is te zien dat de totale afstand flink afneemt van k=1 naar k=2 en dat de afname klein is van k=2 naar k=3. De elleboogmethode bestaat uit het vinden van de waarde van k, van waaruit de afname van de totale afstand marginaal wordt. Je zou dus kunnen concluderen dat k=3 niet nodig is.</p>
<p>Van belang bij deze afweging is ook wat de variabelen in werkelijkheid voorstellen. Zou x1 de gemiddelde uitgaven voor voedsel voorstellen en x2 die voor kleding, dan heb je bij k=2 een cluster 1 die veel uitgeeft aan voedsel en weinig aan kleding en een cluster 2 bij wie dat precies andersom is. Maar bij k=3 wordt cluster 1 verder opgesplitst en het is maar de vraag of je de verschillen zinvol kunt duiden.</p>
</section>
</section>
<section id="slotopmerkingen" class="level1">
<h1>Slotopmerkingen</h1>
<ol type="1">
<li><p>In voorgaande uitwerking in Excel heb je de iteratie handmatig uitgevoerd door steeds betere centrumwaarden te bepalen en deze weer in het model te gebruiken. In plaats daarvan zou je ook gebruik kunnen maken van de Oplosser, een met Excel meegeleverde invoegtoepassing. In dat geval is de te minimaliseren doelfunctie de cel met de som van de minimale afstanden en zijn de centrumwaarden de variabele cellen.</p></li>
<li><p>Het uitgewerkte voorbeeld was een zeer kleine dataset waarmee het principe van het k-means algoritme goed in Excel uitgelegd kon worden. Voor grotere datasets en meerdere variabelen is Excel niet het geschikte gereedschap en zul je over moeten stappen naar bijvoorbeeld R of Python. Voor beide zijn veel artikelen en tutorials met voorbeelden te vinden.</p></li>
<li><p>In plaats van de uitwerkingen in Excel zelf te maken kun je ook een bestand met het eindresulttaat downloaden via <a href="kmeans-resultaat.xlsx">kmeans-resultaat.xlsx</a>.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Gekopieerd!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Gekopieerd!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/bwelman\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Deze website is gemaakt met <a href="https://quarto.org/">Quarto</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>